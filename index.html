<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="/io.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/webrtc.io.js"></script>
	<script>
		(function(){
			// Init socketio
			var socket = io.connect("http://localhost:8000");
			function join(room){
				$(function(){
					rtc.connect('ws://localhost:8001', room);
					rtc.createStream('remote');
					rtc.on('add remote stream', function(stream){
						console.log('remote');
					});
				});
			}
			if(location.hash) {
				var room = location.hash.substring(1);
				socket.emit('join room', room);
				join(room);
			} else {
				socket.emit('new room');
				socket.on('new room', function (room) {
					location.replace('#' + room);
					join(room);
				});
			}

			// Init facebook API
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '725325364157893',
          status     : true,
          xfbml      : true
        });
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/all.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));

		})();

	</script>
</head>
<body>
	<audio id="remote" autoplay></audio>
</body>
</html>
